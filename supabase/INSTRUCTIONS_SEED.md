# Instructions pour ex√©cuter le script Seed

## üìã Vue d'ensemble

Le script `seed.sql` a √©t√© con√ßu pour peupler votre base de donn√©es Mon Toit avec des donn√©es de test r√©alistes. Cependant, il n√©cessite d'abord la cr√©ation des utilisateurs dans le syst√®me d'authentification Supabase.

## üîÑ Ordre d'ex√©cution

### 1. Cr√©er les utilisateurs dans Supabase Auth

**Acc√©dez au dashboard Supabase ‚Üí Authentication ‚Üí Users**

Cr√©ez les 8 utilisateurs suivants avec leurs UUIDs pr√©d√©finis :

#### ‚úÖ UUIDs √† utiliser pour la cr√©ation d'utilisateurs :

| R√¥le | Email | Nom complet | UUID | Mot de passe |
|------|-------|--------------|------|-------------|
| Admin syst√®me | admin@montoit.ci | Admin Syst√®me | `11111111-1111-1111-1111-111111111111` | `Admin123!` |
| Propri√©taire 1 | jean.kouadio@montoit.ci | Jean Kouadio | `22222222-2222-2222-2222-222222222222` | `Proprio123!` |
| Propri√©taire 2 | marie.konan@montoit.ci | Marie Konan | `33333333-3333-3333-3333-333333333333` | `Proprio123!` |
| Propri√©taire 3 | yao.bamba@montoit.ci | Yao Bamba | `44444444-4444-4444-4444-444444444444` | `Proprio123!` |
| Locataire 1 | fatima.traore@montoit.ci | Fatima Traor√© | `55555555-5555-5555-5555-555555555555` | `Locataire123!` |
| Locataire 2 | mohamed.sissoko@montoit.ci | Mohamed Sissoko | `66666666-6666-6666-6666-666666666666` | `Locataire123!` |
| Agence | contact@immobilier.ci | Immobilier CI | `77777777-7777-7777-7777-777777777777` | `Agence123!` |
| Admin ANSUT | patrick.somet@ansut.ci | Patrick Somet | `88888888-8888-8888-8888-888888888888` | `Ansut123!` |

**Important :** Pour cr√©er un utilisateur avec un UUID sp√©cifique dans Supabase:

1. Allez dans **Authentication ‚Üí Users**
2. Cliquez sur **"Add user"** ou **"Create user"**
3. Remplissez l'email et le mot de passe
4. **AVANT** de cliquer sur "Create", cliquez sur **"Advanced"** ou **"Show advanced options"**
5. Dans le champ **"User ID"** ou **"Custom user ID"**, collez l'UUID correspondant
6. Cr√©ez l'utilisateur

### 2. Ex√©cuter le script Seed

**Acc√©dez au dashboard Supabase ‚Üí SQL Editor**

1. Copiez tout le contenu du fichier `seed.sql`
2. Collez-le dans l'√©diteur SQL
3. **IMPORTANT :** Assurez-vous d'√™tre connect√© avec le **SERVICE ROLE**
   - Regardez en haut de l'√©diteur SQL, vous devriez voir "Connected as: service_role"
4. Cliquez sur **"Run"** ou **"Execute"**

### 3. V√©rifier les r√©sultats

Le script affichera un rapport complet dans les r√©sultats :

- ‚úÖ Nombre d'utilisateurs cr√©√©s par type
- ‚úÖ Nombre de propri√©t√©s cr√©√©es par type
- ‚úÖ Loyers moyens par type de propri√©t√©
- ‚úÖ Demandes de location en attente
- ‚úÖ Nombre de favoris cr√©√©s

## üìä Donn√©es qui seront cr√©√©es

### Utilisateurs (8)
- **1 Admin syst√®me** - Gestion de la plateforme
- **3 Propri√©taires** - Avec diff√©rents niveaux de v√©rification
- **2 Locataires** - Pour tester les demandes de location
- **1 Agence immobili√®re** - Pour les mandats de location
- **1 Admin ANSUT** - Avec r√¥les super_admin et admin

### Propri√©t√©s (8)
- **1 Villa de luxe** - 850 000 FCFA/mois (Cocody Riviera Palmeraie)
- **1 Villa moderne** - 450 000 FCFA/mois (Cocody Riviera Golf)
- **1 Duplex** - 350 000 FCFA/mois (Yopougon)
- **2 Appartements standing** - 250 000 et 380 000 FCFA/mois
- **1 Appartement classique** - 150 000 FCFA/mois (Treichville)
- **1 Studio meubl√©** - 120 000 FCFA/mois (Marcory)
- **1 Maison** - 180 000 FCFA/mois (Abobo)

### Donn√©es additionnelles
- **2 Demandes de location** - Statut "pending"
- **Plusieurs favoris** - Pour tester la fonctionnalit√©
- **Attribution automatique des r√¥les** - Selon le type d'utilisateur

## üß™ Tests √† effectuer apr√®s le seed

1. **Test API publique** : Acc√©dez √† `GET /rest/v1/rpc/get_public_properties`
2. **Test propri√©taires** : Connectez-vous avec `jean.kouadio@montoit.ci`
3. **Test locataires** : Connectez-vous avec `fatima.traore@montoit.ci`
4. **Test admin** : Connectez-vous avec `patrick.somet@ansut.ci`

## üîß D√©pannage

### Erreur "user does not exist in auth.users"
- V√©rifiez que tous les utilisateurs ont √©t√© cr√©√©s avec les UUIDs exacts
- R√©-ex√©cutez le script seed apr√®s avoir cr√©√© les utilisateurs manquants

### Erreur "permission denied"
- Assurez-vous d'ex√©cuter le script avec le SERVICE ROLE
- Dans SQL Editor, vous devriez voir "Connected as: service_role"

### Aucune propri√©t√© n'appara√Æt
- V√©rifiez que les propri√©taires correspondants existent dans auth.users
- Le script skippe l'insertion des propri√©t√©s si le owner_id n'existe pas

## üéØ R√©sultat attendu

Apr√®s ex√©cution r√©ussie, votre application Mon Toit aura :
- Des donn√©es de test r√©alistes pour tous les sc√©narios
- Des utilisateurs avec diff√©rents r√¥les et permissions
- Des propri√©t√©s vari√©es couvrant tous les quartiers d'Abidjan
- Des fonctionnalit√©s compl√®tes testables

Vous pouvez maintenant utiliser ces identifiants pour tester toutes les fonctionnalit√©s de votre application !